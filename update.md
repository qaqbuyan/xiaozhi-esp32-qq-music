# 项目更新日志

> 记录项目的所有重要更新、修复和功能添加

## 📅 2025-09-15

### 🎵 播放体验优化
- **14:15:28** 修复批量播放时偶尔会出现的跳歌问题

### 📝 歌词功能改进
- **13:25:45** 修复歌词解析问题，确保正确显示歌曲信息

### 📁 文件路径处理
- **11:36:36** 修复歌名、专辑、歌手名称中包含"-"导致的切割问题

### 🎛️ 音频系统优化
- **02:23:41** 添加音频格式枚举，根据音频格式选择不同的处理逻辑

### 🔧 代码结构优化
- **02:03:57** 分离缓冲区获取音频数据以及解码MP3帧函数，使代码更加模块化，便于维护和理解

## 📅 2025-09-13

### 🎵 音乐API更新
- **01:57:35** 更新音乐API，实现歌单音乐信息批量下载，包含普通歌词、逐字歌词、翻译歌词、音译歌词

## 📅 2025-09-12

### 🎲 播放模式扩展
- **12:35:52** 实现随机播放功能
- 添加数据类型检测，修改`FetchAndProcessPlaylists`函数，使其能够区分处理歌单列表和歌曲列表这两种不同的数据结构

## 📅 2025-09-07

### 🧹 内存管理优化
- **04:14:46** 修复ESP内存问题：资源释放不完整导致的内存泄漏
- 完善更简洁的接口设计

## 📅 2025-09-06

### 🧹 内存管理优化
- **15:42:45** 修复ESP内存问题：音乐播放结束后，没有释放内存和线程资源的问题
- 确保正确清理歌词列表和相关资源

### 🔧 类型安全修复
- **00:50:51** 修复ESP类型转换问题

## 📅 2025-09-01

### 📁 文件系统优化
- **12:10:48** 清理所有可能导致路径问题的特殊字符，防止出现创建二级目录的情况

### 🎵 功能扩展
- **07:44:47** 添加QQ音乐API的推荐歌单功能
- **01:14:56** 添加QQ音乐API的新歌速递功能

## 📅 2025-08-31

### 🔍 搜索功能优化
- **23:53:22** 添加音乐的热门搜索功能
- 修复歌曲ID搜索没有优先使用索引的问题

### 🎵 API优化
- **02:58:51** 优化音乐API函数复用，修复已知漏洞

## 📅 2025-08-30

### 🔗 链接解析功能
- **04:26:18** 添加QQ音乐短链接解析功能，支持解码链接数据（包括歌曲、歌单、专辑）

### 🎵 播放列表管理
- **00:21:10** 添加获取收藏歌单列表功能

## 📅 2025-08-28

### 🎵 缓存功能修复
- **02:22:09** 修复音乐缓存搜索功能

## 📅 2025-08-18

### 🎵 性能优化
- **09:58:04** 实现音乐信息缓存功能，提升响应速度